{"name": "test_login[caseinfo1]", "status": "broken", "statusDetails": {"message": "AttributeError: 'dict' object has no attribute 'json'", "trace": "self = <test_case.login_test.Testlogin object at 0x10f728c70>\ncaseinfo = {'name': '骑手登录', 'request': {'extract': {'token': '$.data.token'}, 'headers': {'Content-Type': 'application/json', 'Us...ari/537.36', 'deviceId': '1254'}, 'method': 'post', 'params': {'smsCode': '$smsCode', 'userName': '15400010001'}, ...}}\n\n    @allure.story('骑手登录接口')\n    @pytest.mark.dependency()\n    @pytest.mark.parametrize(\"caseinfo\", YamlUtil().yaml_read(\"data\", \"login.yaml\"))\n    def test_login(self, caseinfo):\n        # 获取ymal\n        value = caseinfo['request']\n        # 更新需要参数化的万能验证码，完成接口关联\n        body = value['params']\n        # for key, value in body.items():\n        #     if key == value:\n        #        value= YamlUtil().yaml_read(\"data\", \"extract.yaml\")[\"almighty_code\"]\n    \n        validate = value[\"validate\"] if \"validate\" in value else None\n>       response = Utils.sendRequest(caseinfo['name'],value['method'], value['path'], body, value['headers'])\n\ntest_case/login_test.py:30: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nname = '骑手登录', method = 'post'\nurl = 'http://api.errand.u57.net/api/rider/smscode/login'\ndata = '{\"smsCode\": \"$smsCode\", \"userName\": \"15400010001\"}'\nheaders = {'Content-Type': 'application/json', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (HTML, like Gecko) \"\"Chrome/54.0.2840.99 Safari/537.36', 'deviceId': '1254'}\nkwargs = {}, rep = {'code': '10003', 'message': '验证码错误', 'success': False}\n\n    @staticmethod\n    # 重写post 和get请求，方便自动去请求\n    def sendRequest(name,method, url, data,headers,**kwargs):\n        logger.info(\"---------------接口测试开始---------------\")\n        # 把请求方法改成小写\n        method = str(method).lower()\n        rep = None\n        # 用请求路径和域名拼接成完成的请求链接\n        url = URL + url\n    \n        # get请求以params接参数\n        if method == \"get\":\n            rep = request(method=method, url=url, params=data, headers=headers,**kwargs)\n        # post请求以data接参数,原因：data只能传输简单的只有键值对的dict或者str格式的数据，json一般只能传输dict格式，简单复杂的都可以\n        # data可以满足多种格式，那我们只需把都转成str类型\n        elif method == \"post\":\n            # 把键值对转换成str类型\n            data = json.dumps(data)\n            rep = request(method=method, url=url, data=data, headers=headers,**kwargs).json()\n        # 打印请求前日志\n        Utils.request_log(name, method, url, data, headers)\n>       logger.info(\" 实际结果:{}\".format(rep.json()))\nE       AttributeError: 'dict' object has no attribute 'json'\n\ntools/base_requests.py:55: AttributeError"}, "attachments": [{"name": "log", "source": "dc166c7c-adda-4071-b279-151beba54061-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "caseinfo", "value": "{'name': '骑手登录', 'request': {'method': 'post', 'path': '/api/rider/smscode/login', 'headers': {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (HTML, like Gecko) \"\"Chrome/54.0.2840.99 Safari/537.36', 'deviceId': '1254', 'Content-Type': 'application/json'}, 'params': {'smsCode': '$smsCode', 'userName': '15400010001'}, 'extract': {'token': '$.data.token'}, 'validate': [{'equal_to': {'$.code': 1}}]}}"}], "start": 1652062539665, "stop": 1652062539805, "uuid": "fb8179b1-040c-4d7e-aa8d-2408e7bc0687", "historyId": "f2d946f59d61f64f935b7e857cc51fc7", "testCaseId": "8cc60c53601aa3949c10cbb3a5eeaa95", "fullName": "test_case.login_test.Testlogin#test_login", "labels": [{"name": "story", "value": "骑手登录接口"}, {"name": "tag", "value": "dependency"}, {"name": "parentSuite", "value": "test_case"}, {"name": "suite", "value": "login_test"}, {"name": "subSuite", "value": "Testlogin"}, {"name": "host", "value": "xudeMac-mini.local"}, {"name": "thread", "value": "21866-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_case.login_test"}]}